<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/polymerfire/firebase-query.html">
<link rel="import" href="../../bower_components/paper-toolbar/paper-toolbar.html">
<link rel="import" href="../../bower_components/app-storage/app-indexeddb-mirror/app-indexeddb-mirror.html">
<link rel="import" href="../../bower_components/paper-item/paper-item.html">

<dom-module id="off-scrum-day-app">
    <template>
        <style>
            :host {
                display: block;

            }

            paper-toolbar.ingtoolbar {
                --paper-toolbar-background: #FF6200;
            }

            .ingtrans {
                display: inline-flex;
                font-family: 'Roboto', 'Noto', sans-serif;
            }

            .ingamount {
                display: inline-flex;
                float: right;

            }

            paper-item {
                margin: 10px;
                padding: 5px;
            }
            .seperateline {
                display: inline-flex;
                margin: 3px;

            }

        </style>

        <firebase-query id="query" app-name="offscrumday" path="/offscrumday" data="{{data}}"></firebase-query>
        <app-indexeddb-mirror session="user1" key="offscrumday" data="{{data}}"
                              persisted-data="{{persistedData}}"></app-indexeddb-mirror>

        <paper-toolbar class="ingtoolbar">
            <div class="title">ING</div>
        </paper-toolbar>

        <!--<template is="dom-repeat" items="[[persistedData]]" as="transaction">-->
        <!--<div class="itembox">-->
        <!--<paper-item>-->
        <!--<paper-item-body two-line>-->
        <!--<p>{{transaction.type}}<p>-->
        <!--<p>{{transaction.date}}<p>-->
        <!--<div class="ingtrans">{{transaction.name}}</div>-->
        <!--<div class="ingamount">{{transaction.amount}}</div>-->
        <!--<div secondary>{{transaction.description}}</div>-->
        <!--</paper-item-body>-->
        <!--</paper-item>-->
        <!--</div>-->
        <!--</template>-->


        <template is="dom-repeat" items="[[persistedData]]" as="transaction">
            <div class="itembox">
                <paper-item>
                    <span class="seperateline"> {{transaction.iconId}} test</span>
                    <paper-item-body two-line>
                        {{transaction.date}} {{transaction.name}}
                        <span class="ingamount">{{transaction.amount}}</span>
                        <div secondary>{{transaction.description}}</div>
                    </paper-item-body>
                </paper-item>
            </div>
        </template>


        <button on-tap="mimicTransaction">Mimic transaction</button>

    </template>

    <script>
        Polymer({

            is: 'off-scrum-day-app',

            properties: {
                prop1: {
                    type: String,
                    value: 'off-scrum-day-app'
                }
            },
            mimicTransaction: function () {
                var key = Number(this.persistedData.slice(-1)[0].$key) + 1;
                this.unshift('persistedData', {
                    $key: key,
                    title: 'Fugazi'
                });
            }
        });
    </script>
</dom-module>
