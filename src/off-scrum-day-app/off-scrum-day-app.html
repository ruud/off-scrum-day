<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/polymerfire/firebase-query.html">
<link rel="import" href="../../bower_components/paper-toolbar/paper-toolbar.html">
<link rel="import" href="../../bower_components/app-storage/app-indexeddb-mirror/app-indexeddb-mirror.html">
<link rel="import" href="off-scrum-day-balance.html">
<dom-module id="off-scrum-day-app">
    <template>
        <style>
            :host {
                display: block;

            }
            paper-toolbar.ing {
                --paper-toolbar-background: #FF6200;
            }


        </style>
        <firebase-query id="query" app-name="offscrumday" path="/offscrumday" data="{{data}}"></firebase-query>
        <app-indexeddb-mirror session="user1" key="offscrumday" data="{{data}}" persisted-data="{{persistedData}}"></app-indexeddb-mirror>

        <paper-toolbar class="ing" >
            <div class="title">ING</div>
        </paper-toolbar>

        <h2>Hello [[prop1]]</h2>

        <off-scrum-day-balance transactions="[[persistedData]]"></off-scrum-day-balance>

            <ul class="notes">
            <template is="dom-repeat" items="[[persistedData]]" as="transaction">
                <li>{{transaction.description}} {{transaction.amount}}</li>
            </template>
        </ul>

        <button on-tap="mimicTransaction">Mimic transaction</button>

    </template>

    <script>
        Polymer({

            is: 'off-scrum-day-app',
            properties: {
                prop1: {
                    type: String,
                    value: 'off-scrum-day-app'
                }
            },

            mimicTransaction: function() {
                var key = Number(this.persistedData.slice(-1)[0].$key) + 1;
                this.unshift('persistedData', {
                    $key: key,
                    related_account: '3022977',
                    type: 'GT',
                    name: 'Fugazi',
                    description: 'cashorder 12345',
                    amount: -25,
                    date: new Date(),
                    iconId: 1
                });
            }

        });
    </script>
</dom-module>
